<!doctype html><title>Minimal tQuery Page</title>
<script src="../../../build/tquery-bundle-require.js"></script>
<script src="../tquery.spaceships.js"></script>
<body><script>
require(['tquery.loaders', 'tquery.skymap', 'tquery.grassground', 'tquery.shadowmap'], function(){
	var world	= tQuery.createWorld().boilerplate().start();
	
	tQuery.createSkymap('mars').addTo(world)

	world.shadowMapEnabled(true)

	tQuery.createGrassGround({
		textureRepeatX	: 10,
		textureRepeatY	: 10,
	}).addTo(world).scale(30)
		.receiveShadow(true)

	tQuery.createAmbientLight().addTo(world)
		.color(0x444444)
	tQuery.createDirectionalLight().addTo(world)
		.color(0xaaaaaa)
		.intensity(2)
		.position(-1,1,1)	

	tQuery.createDirectionalLight().addTo(world)
		.color(0xaaaaaa)
		.intensity(2)
		.position(1,1,1)	
		.castShadow(true)
		.shadowDarkness(0.4)
		.shadowMap(512*8,512*8)
		.shadowCamera(30, -30, 2, -2, 0.1, 50)
		//.shadowCameraVisible(true)

	tQuery.loadSpaceShip3().addEventListener('load', function(event){
		var object	= tQuery(event.content)
		tQuery('mesh', object).castShadow(true)
		for(var x = -5; x < +5; x++){
			for(var z = -10; z < +10; z++){
				object.clone().addTo(world)
					.translateX(x * 1.2)
					.translateY(0.15)
					.translateZ(z * 1.2)
			}
		}		
	})
})
</script></body>