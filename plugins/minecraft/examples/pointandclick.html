<!doctype html><title>Minimal tQuery Page</title>
<script src="../../../build/tquery-bundle-require.js"></script>
<body><script>
require(['tquery.grassground', 'tquery.domevent', 'tquery.minecraft'], function(){
	var world	= tQuery.createWorld().boilerplate().start();
	
	world.removeCameraControls();
	var tCamera	= world.tCamera();
	tCamera.position.set(0,1,2);
	tCamera.lookAt( world.tScene().position );

	var character	= tQuery.createMinecraftChar().addTo(world); 
	var character3D	= character.object3D();
	character3D.scale(0.5);

	tQuery.createMinecraftCharKeyboard2({
		object3D	: character3D,
	});

	// to enable a tracking camera
	var cameraControls	= tQuery.createCameraFpsControls({
		trackedObject	: character3D,
		tCamera		: world.tCamera()
	});
	world.setCameraControls(cameraControls)

	var ground	= tQuery.createGrassGround({
		textureRepeatX	: 10,
		textureRepeatY	: 10,
	}).addTo(world)
		.scale(3)

/**
 * - what is the proper state automata
 *   - copy cloudparty one ?
 *   - click to enter active, click to leave active
 *   - hover to update pointer position. so only if
 *   - dblclick to trigger action
 * - what is the relation with keyboard ?
 *   - what if keyboard is used to move the character while in pointandclick
 *   - if so, leave pointandclick mode
 */

	var pointer	= tQuery.createSphere().addTo(world)
		.scale(0.3)
		.setBasicMaterial()
			.wireframe(true)
			.back()
	world.enableDomEvent();

	ground.on('mousemove', function(event){
		//console.log('event', event.type, event)
		var position	= event.intersect.point;
		pointer.position(position)
	});
	
	ground.on('mouseover', function(event){
		//console.log('event', event.type, event)
		pointer.visible(true)
	});

	ground.on('mouseout', function(event){
		//console.log('event', event.type, event)
		pointer.visible(false)
	});

	ground.on('dblclick', function(event){
		//console.log('event', event.type, event)
		var position	= event.intersect.point;
		character3D.position(position)
	});

});
</script></body>

