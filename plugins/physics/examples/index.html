<!doctype html><title>Minimal tQuery Page</title>
<script src="../../../build/tquery-bundle.js"></script>
<script src="./vendor/physijs/physi.js"></script>
<script src="../tquery.physijs.js"></script>

<script src="../../materials/tquery.meshlambertmaterial.js"></script>
<script src="../../materials/tquery.meshphongmaterial.js"></script>
<script src="../../materials/tquery.meshbasicmaterial.js"></script>

<body><script>
	var world	= tQuery.createWorld().boilerplate().start();
	world.tCamera().translateZ(-100);

	// TODO this cause trouble. i dont want to setup that everytime
	Physijs.scripts.worker	= 'vendor/physijs/physijs_worker.js';
	Physijs.scripts.ammo	= 'ammo.js';

	world.enablePhysics();

	var texture	= THREE.ImageUtils.loadTexture( "../../assets/images/water.jpg" );

	setInterval(function(){
		var value	= Math.random();
		// Cube
		if( value < 0.33 )	var object	= tQuery.createCube()
		else if( value < 0.66 )	var object	= tQuery.createSphere()
		else if( value <= 1.0 )	var object	= tQuery.createCylinder()
		
		object.addTo(world)
			.setBasicMaterial().color(Math.random()*0xffffff).map(texture).back()
			.geometry().scaleBy(4, 4, 4).back()
			.rotation(Math.random()*Math.PI*2, Math.random()*Math.PI*2, Math.random()*Math.PI*2)
			.position(Math.random()*2-1, 15, Math.random()*2-1)
			.enablePhysics({
				//tGeometry	: new THREE.SphereGeometry(),
				friction	: 0.5,
				restitution	: 1
			})
	}, 1000);


	// Ground
	tQuery.createCube().addTo(world)
		.setBasicMaterial().map(texture).back()
		.geometry().scaleBy(1000, 1, 1000).back()
		.translateY(-10)
		.enablePhysics({
			mass		: 0,
			friction	: 0.5,
			restitution	: 1
		});

</script></body>