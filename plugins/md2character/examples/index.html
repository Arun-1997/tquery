<!doctype html><title>Minimal tQuery Page</title>
<script src="../../../build/tquery-bundle.js"></script>
<script src="../../requirejs/tquery.norequirejs.js"></script>

<script src="../../../vendor/threex/THREEx.KeyboardState.js"></script>
<script src="../../keyboard/tquery.keyboard.js"></script>

<script src='../../checkerboard/tquery.checkerboard.js'></script>
<script src='../../fog/tquery.world.createfog.js'></script>


<script src="../tquery.md2character.js"></script>
<script src="../tquery.md2character.cameracontrols.js"></script>

<script src="../tquery.md2character.ratamahatta.js"></script>
<script src="../tquery.md2character.ratamahatta.keyboard.js"></script>

<body><script>
	var world	= tQuery.createWorld().boilerplate().start();

	// change renderer clear color
	world.renderer().setClearColorHex( 0x000000, world.renderer().getClearAlpha() );

	// Add lights
	tQuery.createAmbientLight().addTo(world).color(0x444444);
	tQuery.createDirectionalLight().addTo(world).position(-1,1,1).color(0xFFFFFF).intensity(3);

	// add a fog
	world.addFogExp2({density : 0.05});
	
	// setup the columns
	var material	= new THREE.MeshLambertMaterial({
		ambient	: 0xFFFFFF,
		color	: 0xFFAAAA,
		map	: THREE.ImageUtils.loadTexture('../../assets/images/water.jpg'),
	});
	for(var i = 0; i < 15; i++ ){
		tQuery.createCylinder(material).addTo(world)
				.scale(0.4,2,0.4)
				.translateX(i%2 ? +1 : -1)
				.translateY(2/2)
				.translateZ(15/2 + -1*i)
	}

	// add a checkboard, 1 tile per 1 units
	tQuery.createCheckerboard({
		segmentsW	: 100,
		segmentsH	: 100
	}).addTo(world).scaleBy(100);
	
	// CHARACTER
	character	= new tQuery.RatamahattaMD2Character().attach(world).hookKeyboard();
	character.bind("loaded", function(){
		console.log("list animmation", Object.keys(character._meshBody.geometry.animations))
	});

	// set the cameraControls	
	world.setCameraControls(new tQuery.MD2Character.CameraControls(character))

	
	world.loop().hook(function(){
		var keyboard	= tQuery.keyboard();
		if( keyboard.pressed("s") )	character.setSkin(Math.floor(Math.random()*5 % 5));
		// TODO issue on the event with the pressed event
	})

</script></body>