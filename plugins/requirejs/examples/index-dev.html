<!doctype html>
<script src="../../../build/tquery-bundle.js"></script>
<script src="../../../plugins/requirejs/vendor/require.js"></script>
<script src="../../../plugins/requirejs/build/all.confrequire.js"></script>
<body><script>
	requirejs.config({
		map	: {
			"*"	: {
				'webgl-inspector'	: 'http://benvanik.github.com/WebGL-Inspector/core/embed.js',
				'domReady'		: 'https://raw.github.com/requirejs/domReady/latest/domReady.js',
			}
		},
		shim	: {
			'http://benvanik.github.com/WebGL-Inspector/core/embed.js'	: [
				//'domReady!',
			]
		}
	});

	require([
			'tquery.createplanet','tquery.keyboard',
			'tquery.minecraft', 'tquery.skymap',
			'tquery.videos',
			'tquery.text', 
			//'tquery.text.allfonts',
			'tquery.domevent',
			'tquery.tweenjs',
			'tquery.lightsaber',
			'tquery.lensflare',
			'tquery.datguituner',
			'tquery.csg',
			'webgl-inspector',
			'domReady!'
		], function(){
		var world	= tQuery.createWorld().boilerplate().start();

		// create the saber	
		var saber	= tQuery.createLightSaber().addTo(world);
	// change the material of the hilt
		var material	= new THREE.MeshBasicMaterial({
			color	: 0x44aaFF,
			envMap	: tQuery.createCubeTexture('skybox')
		})
		saber.object3D('hiltIn').material(material)
		saber.object3D('hiltOut').material(material)
	
		// world.removeCameraControls();
		// tQuery.createLensFlare().addTo(world).position(0, 1, -3)

		// create cube for csg
		// var cube	= tQuery.createCube().geometry().translateX(0.6).back();
		// var sphere	= tQuery.createSphere().geometry().translateX(1).back();	
		// world.add(cube.subtract(sphere).id('origCube').geometry().center().back());

		// setup light
		tQuery.createDirectionalLight().addTo(world).position(1,1,1);
		tQuery.createDirectionalLight().addTo(world).position(-1,1,1);
		tQuery.createAmbientLight().addTo(world).color(0xFFFFFF);
		var planet	= tQuery.createPlanet().addTo(world)
					.translateX(-1);
		
		
		tQuery.DatguiTuner('light')
		
		// add a minecraft character
		// var minecraft	= tQuery.createMinecraftChar().addTo(world);
		// minecraft.loadSkin(tQuery.MinecraftChar.baseUrl+'examples/images/agentsmith.png')
		// minecraft.object3D('root').translateY(-0.5)
		
		var text	= tQuery.createText("tQuery is Fun!", {
			font	: "droid sans"
		}).scaleBy(1/4).addTo(world).translateX(2).translateY(0.3).translateZ(-0.2);
		
		// // enable domEvent on this world
		// world.enableDomEvent();	
		// // create a cube
		// var cube	= tQuery.createCube().addTo(world);
		// // bind some event on it
		// tQuery('cube').on('mouseover', function(event){
		// 	console.log(event.type, "on cube", event)
		// });	
		// tQuery('cube').on('click', function(event){
		// 	console.log("click on cube", event)
		// });
		// tQuery(world.tScene()).on('click', function(event){
		// 	console.log("click on scene", event);
		// });



		// make the object rotate
		// world.loop().hook(function(delta, now){
		// 	var angle	= 0.05 * now * Math.PI * 2;
		// 	planet.get(0).rotation.y	= angle;

		// 	var curScale	= planet.get(0).scale.x;
		// 	var dstScale	= tQuery.keyboard().pressed('a') ? 2 : 1;
		// 	planet.scale( curScale + (dstScale-curScale)*0.1 );
		// });
		
		var tMaterial	= new THREE.MeshBasicMaterial({
			envMap	: tQuery.createCubeTexture('skybox')
		});
		text.material(tMaterial)
		// var tMaterial	= new THREE.MeshBasicMaterial({
		// 	map	: tQuery.createVideoTexture('../../videos/examples/sintel.ogv'),
		// 	//map	: tQuery.createWebcamTexture()
		// });
		// var object	= tQuery.createSphere(tMaterial).addTo(world).scaleBy(1);
		
		
	});
</script>



