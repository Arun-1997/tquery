<!doctype html><title>Minimal tQuery Page</title>
<script src="../../build/tquery-bundle.js"></script>

<script src="csg.js"></script>
<script src="ThreeCSG.js"></script>
<script src="tquery.geometry.csg.js"></script>
<script src="tquery.object3d.csg.js"></script>
<body>
	<script>
		var world	= tQuery.createWorld().fullpage().start();

		// create object1
		var cube	= tQuery.createCube();
		cube.geometry().translateX(0.6);

		// create object2
		var sphere	= tQuery.createSphere();

		// create object3
		var sphere2	= tQuery.createSphere();
		sphere2.geometry().translateX(1);
		//sphere2.addTo(world);
		
		world.add(cube.subtract(sphere2).id('prout'));
		
		// NOTE: the api is no good
		// * sphere.subtract(cube) -> tQuery.Object3D ? which material ?
		// * would be better API tho
		//   * in another plugins on top
		// * what about inplace replacement of sphere geometry ?
		
		// perform the operation
		var geometry	= sphere.geometry().csg('intersect', cube.geometry());
		geometry.toMesh().id('obj2').translateX(-1).addTo(world);

		// animate the object
		world.loop().hook(function(){
			tQuery('#prout').rotate(0, -0.01, 0)
			
			var mesh	= tQuery('#obj2').get(0);
			mesh.rotation.x	+= 0.01;
			mesh.rotation.y	+= 0.01;
			mesh.rotation.z	+= 0.01;
		});
	</script>
</body>